# NodeMCU RÃ¶le Kontrol Sistemi

Bu proje, NodeMCU'nun hem **Access Point (AP)** hem de **Station (STA)** modunda Ã§alÄ±ÅŸmasÄ±nÄ± saÄŸlayarak, kablosuz aÄŸ Ã¼zerinden rÃ¶leleri kontrol etmeyi amaÃ§lamaktadÄ±r. KullanÄ±cÄ±, bir buton yardÄ±mÄ±yla cihazÄ± sÄ±fÄ±rlayarak tekrar AP moduna alabilir ve WiFi ayarlarÄ±nÄ± deÄŸiÅŸtirebilir.

## ğŸš€ Ã–zellikler
- **AP Modu:** Ä°lk baÅŸlatmada NodeMCU, kendi WiFi aÄŸÄ±na sahip olur ve kullanÄ±cÄ±dan SSID ile parola bilgilerini alÄ±r.
- **EEPROM KullanÄ±mÄ±:** WiFi SSID ve parola bilgileri EEPROM'a kaydedilir, bÃ¶ylece cihaz yeniden baÅŸlatÄ±ldÄ±ÄŸÄ±nda aynÄ± aÄŸa baÄŸlanabilir.
- **STA Modu:** WiFi bilgileri alÄ±ndÄ±ktan sonra, cihaz kaydedilen SSID ve parola ile internete baÄŸlanÄ±r.
- **RÃ¶le KontrolÃ¼:** KullanÄ±cÄ±, hem **buton ile** hem de **HTTP istekleri** ile rÃ¶leleri aÃ§Ä±p kapatabilir.
- **Buton ile Resetleme:** `D1` pinine baÄŸlÄ± butona basÄ±larak, NodeMCU tekrar AP moduna alÄ±nabilir.
- **Web ArayÃ¼zÃ¼:** KullanÄ±cÄ±, tarayÄ±cÄ± Ã¼zerinden rÃ¶leleri kontrol edebilir.
- **Firebase ile verilerin uzaktan kontrol edilebilir.

---

## ğŸ› ï¸ Gereksinimler

- **NodeMCU ESP8266**
- **RÃ¶le ModÃ¼lÃ¼**
- **HRC-S04  ModÃ¼lÃ¼**
- **Buton (D1 pinine baÄŸlÄ±)**
- **Potansiyometre**

---

## ğŸ”§ BaÄŸlantÄ±lar

| ESP8266 (NodeMCU) | BaÄŸlantÄ± |
|-------------------|----------|
|      **  D1 **    | Reset Butonu |
|      **  D2 **    | RÃ¶le 1  |
|      **  D3 **    | RÃ¶le 2  |
|      **  D4 **    | RÃ¶le 3  |
|      **  D5 **    | trigPin |
|      **  D6 **    | trigPin |
|      **  A0 **    |   Pot   |
---

## ğŸ“Œ Kurulum ve KullanÄ±m

### 1ï¸âƒ£ **Arduino IDE'yi HazÄ±rlama**
1. ** Driver ** desteÄŸini yÃ¼kleyin
2. ** .ini ayarlamarÄ± yapÄ±n
3. ** Project_info_panel.h iÃ§indeayarlamarÄ± yapÄ±n
---

### 2ï¸âƒ£ **Kodu YÃ¼kleme ve Ã‡alÄ±ÅŸtÄ±rma**
1. **Kodunuzu ESP8266'ya yÃ¼kleyin.**
2. **Ä°lk baÅŸlatmada cihaz AP modunda aÃ§Ä±lÄ±r.**
   - CihazÄ±n WiFi aÄŸÄ±na baÄŸlanÄ±n (`NodeMCU_AP` gibi bir isim gÃ¶rÃ¼necektir.)
   - TarayÄ±cÄ±nÄ±zdan `http://192.168.4.1` adresine gidin.
   - Buradan WiFi SSID ve parola bilgilerini girerek cihazÄ± WiFi aÄŸÄ±na baÄŸlayÄ±n.
3. **Cihaz STA moduna geÃ§erek kaydedilen WiFi aÄŸÄ±na baÄŸlanÄ±r.**
   - Seri monitÃ¶rden IP adresini kontrol edebilirsiniz.
4. **Web arayÃ¼zÃ¼nÃ¼ kullanarak rÃ¶leleri kontrol edin.**
   - `http://ESP_IP_ADRESI/relay?relay=1&state=1` (RÃ¶le 1 AÃ§)
   - `http://ESP_IP_ADRESI/relay?relay=1&state=0` (RÃ¶le 1 Kapat)
5. ** Firebase Ã¼zerinden verialÄ±ÅŸveriÅŸi **
   - Firestore Ã¼zerinden kontrol bu kontrol yapÄ±sÄ± web arayÃ¼Ã¼ ile senkronizedir.
6. **Buton ile cihazÄ± sÄ±fÄ±rlayÄ±p tekrar AP moduna alabilirsiniz.**

---

## ğŸŒ Web ArayÃ¼zÃ¼ KullanÄ±mÄ±
NodeMCU, bir **HTML tabanlÄ± web arayÃ¼zÃ¼** sunarak rÃ¶lelerin kolayca kontrol edilmesini saÄŸlar. TarayÄ±cÄ±nÄ±zdan ESP8266'nÄ±n IP adresine giderek arayÃ¼ze eriÅŸebilirsiniz.

### ğŸ”— **Ã–rnek HTTP KomutlarÄ±**

| Ä°ÅŸlem | URL |
|-------|-----|
| RÃ¶le 1 AÃ§ | `http://ESP_IP_ADRESI/relay?relay=1&state=1` |
| RÃ¶le 1 Kapat | `http://ESP_IP_ADRESI/relay?relay=1&state=0` |
| RÃ¶le 2 AÃ§ | `http://ESP_IP_ADRESI/relay?relay=2&state=1` |
| RÃ¶le 2 Kapat | `http://ESP_IP_ADRESI/relay?relay=2&state=0` |
| RÃ¶le 3 AÃ§ | `http://ESP_IP_ADRESI/relay?relay=3&state=1` |
| RÃ¶le 3 Kapat | `http://ESP_IP_ADRESI/relay?relay=3&state=0` |


---

## ğŸ› ï¸ Kod YapÄ±sÄ±

ğŸ“‚ **Proje DosyalarÄ±:**
```
/NodeMCU_Relay_Control
â”œâ”€â”€ main.cpp          # Ana program
â”œâ”€â”€WifiManager
|     â”œâ”€â”€ WifiManager.cpp    # Wifi kontrol yÃ¶netimi
|     â”œâ”€â”€ WifiManager.h     
â”œâ”€â”€FirestoreManager
|     â”œâ”€â”€ FirestoreManager.cpp    # Firebase kontrol yÃ¶netimi
|     â”œâ”€â”€ FirestoreManager.h    
|     â”œâ”€â”€JsonParser
|           â”œâ”€â”€ JsonParser.cpp    # JsonParser yÃ¶netimi
|           â”œâ”€â”€ JsonParser.h  
â”œâ”€â”€WebManager
|     â”œâ”€â”€ WebManager.cpp    # Web arayÃ¼zÃ¼ yÃ¶netimi
|     â”œâ”€â”€ WebManager.h      
â”œâ”€â”€ RelayManager
|     â”œâ”€â”€ RelayManager.cpp  # RÃ¶le kontrol yÃ¶netimi
|     â”œâ”€â”€ RelayManager.h    
â”œâ”€â”€PotentiometerManager
|     â”œâ”€â”€ Potentiometer.cpp    # pot kontrol yÃ¶netimi
|     â”œâ”€â”€ Potentiometer.h   
â”œâ”€â”€HC-SR04
|     â”œâ”€â”€ HC-SR04.cpp    # HC-SR04 kontrol yÃ¶netimi
|     â”œâ”€â”€ HC-SR04.h  
â”œâ”€â”€ data/index.html   # HTML arayÃ¼zÃ¼ (SPIFFS iÃ§in)
â””â”€â”€ README.md         # Proje aÃ§Ä±klamasÄ±
```

---

## â“ Sorun Giderme

1ï¸âƒ£ **Cihaz AP modunda gÃ¶zÃ¼kmÃ¼yor:**
   - CihazÄ± resetleyin (`D1` butonuna basÄ±n).
   - Kodun tekrar yÃ¼klendiÄŸinden emin olun.

2ï¸âƒ£ **Cihaz WiFi aÄŸÄ±na baÄŸlanmÄ±yor:**
   - SSID ve parola bilgilerinin doÄŸru olduÄŸundan emin olun.
   - Router'da MAC filtresi olup olmadÄ±ÄŸÄ±nÄ± kontrol edin.

3ï¸âƒ£ **HTTP komutlarÄ± Ã§alÄ±ÅŸmÄ±yor:**
   - IP adresinin doÄŸru olduÄŸunu doÄŸrulayÄ±n.
   - `http://ESP_IP_ADRESI/relay?relay=1&state=1` gibi tam URL kullanÄ±n.


---

ğŸ“Œ **Lisans**
Bu proje MIT lisansÄ± ile lisanslanmÄ±ÅŸtÄ±r. KullanÄ±m serbesttir! ğŸ¯

